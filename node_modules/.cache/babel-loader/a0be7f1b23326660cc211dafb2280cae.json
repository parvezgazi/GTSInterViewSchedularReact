{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */function (_super) {\n  __extends(MonthEvent, _super);\n  function MonthEvent(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.renderedEvents = [];\n    _this.monthHeaderHeight = 0;\n    _this.moreIndicatorHeight = 19;\n    _this.renderType = 'day';\n    _this.element = _this.parent.activeView.getPanel();\n    _this.fields = _this.parent.eventFields;\n    _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;\n    _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;\n    _this.maxOrIndicator = _this.maxHeight || _this.withIndicator;\n    _this.moreIndicatorHeight = _this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace ? 0 : _this.moreIndicatorHeight;\n    _this.addEventListener();\n    return _this;\n  }\n  MonthEvent.prototype.removeEventWrapper = function (appElement) {\n    if (appElement.length > 0) {\n      appElement = this.parent.currentView === 'Month' ? appElement : [appElement[0]];\n      for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n        var wrap = appElement_1[_i];\n        if (!wrap.classList.contains('e-more-indicator') && wrap.parentElement && wrap.parentElement.parentNode) {\n          remove(wrap.parentElement);\n        }\n      }\n    }\n  };\n  MonthEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.parent.rowAutoHeight) {\n      this.parent.uiStateValues.top = conWrap.scrollTop;\n      this.parent.uiStateValues.left = conWrap.scrollLeft;\n    }\n    var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.sourceEvent[i].groupIndex + '\"]'));\n        this.removeEventWrapper(appElement);\n        if (this.parent.crudModule.crudObj.targetEvent[i] && this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !== this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n          var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.targetEvent[i].groupIndex + '\"]'));\n          this.removeEventWrapper(ele);\n        }\n      }\n    } else {\n      for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n        var wrap = appointmentWrapper_1[_i];\n        remove(wrap);\n      }\n    }\n    this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n    if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n      return;\n    }\n    if (this.parent.currentView === 'Month') {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      var cellTd = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n      cellTd.appendChild(wrapper);\n      this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n      cellTd.removeChild(wrapper);\n    }\n    this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n    var scrollTop = conWrap.scrollTop;\n    if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n      conWrap.scrollTop = conWrap.scrollTop - 1;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.renderResourceEvents();\n      if (this.parent.virtualScrollModule) {\n        this.parent.virtualScrollModule.updateFocusedWorkCell();\n      }\n    } else {\n      this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n    }\n    if (this.parent.rowAutoHeight) {\n      this.updateBlockElements();\n      var data = {\n        cssProperties: this.parent.getCssProperties(),\n        module: this.parent.getModuleName(),\n        isPreventScrollUpdate: true,\n        scrollPosition: {\n          left: this.parent.uiStateValues.left,\n          top: this.parent.uiStateValues.top\n        }\n      };\n      if (this.parent.virtualScrollModule) {\n        if (this.parent.currentAction) {\n          conWrap.scrollTop = scrollTop;\n          this.parent.currentAction = null;\n        } else {\n          this.parent.virtualScrollModule.updateVirtualScrollHeight();\n        }\n      }\n      if (!this.parent.enablePersistence) {\n        this.parent.notify(events.contentReady, {});\n      }\n      this.parent.notify(events.scrollUiUpdate, data);\n      if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n        var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n        var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WEEK_NUMBER_CLASS));\n        weekNumberCells.forEach(function (cell, i) {\n          var height = totalCells_1[i].offsetHeight;\n          setStyleAttribute(cell, {\n            'height': height + 'px'\n          });\n        });\n        this.parent.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS).scrollTop = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).scrollTop;\n      }\n    }\n    this.parent.renderTemplates();\n  };\n  MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n    this.renderedEvents = [];\n    var eventsList;\n    var blockList;\n    var resIndex = 0;\n    if (resData) {\n      resIndex = resData.groupIndex;\n      this.cssClass = resData.cssClass;\n      this.groupOrder = resData.groupOrder;\n      eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n      blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n      this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n    } else {\n      eventsList = this.parent.eventsProcessed;\n      blockList = this.parent.blockProcessed;\n      this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    }\n    this.sortByDateTime(eventsList);\n    this.sortByDateTime(blockList);\n    if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n      var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n      var height_1 = this.parent.height === 'auto' ? (this.parent.element.querySelector('.e-content-wrap').clientHeight + this.parent.element.querySelector('.e-date-header-wrap').clientHeight) / totalCells.length : this.parent.element.querySelector('.e-schedule-table').clientHeight / totalCells.length;\n      totalCells.forEach(function (cell) {\n        setStyleAttribute(cell, {\n          'height': height_1 + 'px'\n        });\n      });\n    }\n    var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ? 0 : this.workCells.length - 1].getBoundingClientRect();\n    this.cellWidth = cellDetail.width;\n    this.cellHeight = cellDetail.height;\n    this.dateRender = dateRender;\n    var filteredDates = this.getRenderedDates(dateRender);\n    this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n    this.processBlockEvents(blockList, resIndex, resData);\n    for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n      var event_1 = eventsList_1[_i];\n      if (this.parent.resourceBase && !resData) {\n        this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n      }\n      var spannedEvents = this.splitEvent(event_1, filteredDates || this.dateRender);\n      for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n        var event_2 = spannedEvents_1[_a];\n        if (this.maxHeight) {\n          var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] : this.getStartTime(event_2, event_2.data);\n          if (this.getIndex(sDate) > 0) {\n            continue;\n          }\n        }\n        this.updateIndicatorIcon(event_2);\n        this.renderEvents(event_2, resIndex, eventsList);\n      }\n    }\n    this.cssClass = null;\n    this.groupOrder = null;\n  };\n  MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n    for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n      var event_3 = blockEvents_1[_i];\n      if (this.parent.resourceBase && !resData) {\n        this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n      }\n      var blockSpannedList = [];\n      if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n        var temp = extend({}, event_3, null, true);\n        var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n        temp.isBlockIcon = isSameDate;\n        if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n          var e = extend({}, event_3, null, true);\n          e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n          e.isBlockIcon = true;\n          temp[this.fields.startTime] = e[this.fields.endTime];\n          blockSpannedList.push(e);\n        }\n        isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n        if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n          var e = extend({}, event_3, null, true);\n          e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n          e.isBlockIcon = true;\n          blockSpannedList.push(e);\n          temp[this.fields.endTime] = e[this.fields.startTime];\n        }\n        blockSpannedList.push(temp);\n      } else {\n        blockSpannedList.push(event_3);\n      }\n      for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n        var blockEvent = blockSpannedList_1[_a];\n        var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n        for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n          var event_4 = spannedEvents_2[_b];\n          this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n        }\n      }\n    }\n  };\n  MonthEvent.prototype.isSameDate = function (start, end) {\n    return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n  };\n  MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n    var eventData = event.data;\n    var startTime = this.getStartTime(event, eventData);\n    var endTime = this.getEndTime(event, eventData);\n    var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n    if (day < 0 || startTime > endTime) {\n      return;\n    }\n    var cellTd = this.getCellTd(day);\n    var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n    if (!isIcon) {\n      var diffInDays = eventData.count;\n      var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n      appWidth = appWidth <= 0 ? this.cellWidth : appWidth;\n      var appLeft = this.parent.enableRtl ? 0 : position;\n      var appRight = this.parent.enableRtl ? position : 0;\n      var appHeight = this.cellHeight - this.monthHeaderHeight;\n      var appTop = this.getRowTop(resIndex);\n      var blockElement = this.createBlockAppointmentElement(event, resIndex);\n      setStyleAttribute(blockElement, {\n        'width': appWidth + 'px',\n        'height': appHeight + 'px',\n        'left': appLeft + 'px',\n        'right': appRight + 'px',\n        'top': appTop + 'px'\n      });\n      this.renderEventElement(event, blockElement, cellTd);\n    } else {\n      this.renderBlockIndicator(cellTd, position, resIndex);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n    var blockIndicator = createElement('div', {\n      className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS\n    });\n    if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n      cellTd.appendChild(blockIndicator);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getStartTime = function (event, eventData) {\n    return event[this.fields.startTime];\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getEndTime = function (event, eventData) {\n    return event[this.fields.endTime];\n  };\n  MonthEvent.prototype.getCellTd = function (day) {\n    return this.workCells[day];\n  };\n  MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n    return count * this.cellWidth - 1;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n    return 0;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getRowTop = function (resIndex) {\n    return 0;\n  };\n  MonthEvent.prototype.updateIndicatorIcon = function (event) {\n    if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth' || event[this.fields.isAllDay]) {\n      return;\n    }\n    var cloneData = event.data;\n    var start = this.parent.activeView.getStartHour();\n    var end = this.parent.activeView.getEndHour();\n    var startHour = util.getStartEndHours(event[this.fields.startTime], start, end);\n    var endHour = util.getStartEndHours(event[this.fields.endTime], start, end);\n    var actualStartTime = cloneData[this.fields.startTime];\n    var actualEndTime = cloneData[this.fields.endTime];\n    cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n    cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n    if (util.resetTime(actualStartTime).getTime() !== util.resetTime(actualEndTime).getTime()) {\n      var actualStartHour = startHour.startHour;\n      var actualEndHour = endHour.endHour;\n      var startTime = new Date(util.resetTime(actualStartTime));\n      startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n      cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ? startTime.getTime() : util.addDays(startTime, 1).getTime());\n      if (actualEndTime.getTime() !== util.resetTime(actualEndTime).getTime()) {\n        var endTime = new Date(util.resetTime(actualEndTime));\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <= endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n      }\n    }\n  };\n  MonthEvent.prototype.renderResourceEvents = function () {\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var sourceRes = this.parent.crudModule.crudObj.sourceEvent[i];\n        this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n        if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !== this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n          var target = this.parent.crudModule.crudObj.targetEvent[i];\n          this.renderEventsHandler(target.renderDates, target.workDays, target);\n        }\n      }\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    } else {\n      for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n        var slotData = resources_1[_i];\n        this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n      }\n    }\n  };\n  MonthEvent.prototype.getSlotDates = function (workDays) {\n    this.slots = [];\n    var dates = this.dateRender.map(function (date) {\n      return +date;\n    });\n    var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n    while (dates.length > 0) {\n      this.slots.push(dates.splice(0, noOfDays));\n    }\n  };\n  MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n    if (isCloneElement === void 0) {\n      isCloneElement = false;\n    }\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var newRecord = extend({}, record, record.data, true);\n    var attrs = {\n      'data-id': 'Appointment_' + record[this.fields.id],\n      'role': 'button',\n      'tabindex': '0',\n      'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n      'aria-selected': 'false',\n      'aria-grabbed': 'true',\n      'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n    };\n    if (!isCloneElement) {\n      attrs['data-guid'] = record.Guid;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      attrs['data-group-index'] = resIndex.toString();\n    }\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: attrs\n    });\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n    if (record[this.fields.isReadonly]) {\n      addClass([appointmentWrapper], 'e-read-only');\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    appointmentWrapper.appendChild(appointmentDetails);\n    var templateElement;\n    var eventData = record.data;\n    var eventObj = this.getEventData(record);\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = scheduleId + viewName + 'eventTemplate';\n      var eventTemplate = 'eventTemplate' + (this.parent.activeViewOptions.group.resources.length > 0 ? '_' + resIndex : '');\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false);\n    } else {\n      var eventLocation = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var appointmentSubject = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (eventLocation ? ';&nbsp' + eventLocation : '')\n      });\n      var appointmentStartTime = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n      });\n      var appointmentEndTime = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n      });\n      if (this.parent.currentView === 'Month') {\n        if (record[this.fields.isAllDay]) {\n          templateElement = [appointmentSubject];\n          addClass([appointmentSubject], 'e-text-center');\n        } else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n          templateElement = [appointmentStartTime, appointmentSubject];\n        } else {\n          templateElement = [];\n          addClass([appointmentSubject], 'e-text-center');\n          if (!eventData.isLeft) {\n            templateElement.push(appointmentStartTime);\n          }\n          templateElement.push(appointmentSubject);\n          if (!eventData.isRight) {\n            templateElement.push(appointmentEndTime);\n          }\n        }\n      } else {\n        var innerElement = void 0;\n        if (record[this.fields.isAllDay]) {\n          var allDayString = createElement('div', {\n            className: cls.APPOINTMENT_TIME,\n            innerHTML: this.parent.localeObj.getConstant('allDay')\n          });\n          innerElement = [appointmentSubject, allDayString];\n        } else {\n          var timeString = this.parent.getTimeString(eventData[this.fields.startTime]) + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n          var appTime = createElement('div', {\n            className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n            innerHTML: timeString\n          });\n          var appLocation = createElement('div', {\n            className: cls.LOCATION_CLASS,\n            innerHTML: eventLocation\n          });\n          innerElement = [appointmentSubject, appTime, appLocation];\n        }\n        var wrap = createElement('div', {\n          className: 'e-inner-wrap'\n        });\n        append(innerElement, wrap);\n        templateElement = [wrap];\n      }\n    }\n    append(templateElement, appointmentDetails);\n    this.appendEventIcons(record, appointmentDetails);\n    this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n    return appointmentWrapper;\n  };\n  MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n    var eventData = record.data;\n    if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n      var iconClass = record[this.fields.id] === record[this.fields.recurrenceID] ? cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      appointmentDetails.appendChild(createElement('div', {\n        className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n      }));\n    }\n    if (eventData.isLeft) {\n      var iconLeft = createElement('div', {\n        className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n      });\n      prepend([iconLeft], appointmentDetails);\n    }\n    if (eventData.isRight) {\n      var iconRight = createElement('div', {\n        className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n      });\n      append([iconRight], appointmentDetails);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n    var startTime = event[this.fields.startTime];\n    var endTime = event[this.fields.endTime];\n    var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n    if (day < 0) {\n      return;\n    }\n    if (startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n    var overlapCount = this.getIndex(startTime);\n    event.Index = overlapCount;\n    var appHeight = this.eventHeight;\n    this.renderedEvents.push(extend({}, event, null, true));\n    var diffInDays = event.data.count;\n    if (startTime.getTime() <= endTime.getTime()) {\n      var appWidth = diffInDays * this.cellWidth - 5;\n      var cellTd = this.workCells[day];\n      var appTop = overlapCount * (appHeight + EVENT_GAP);\n      var height = this.monthHeaderHeight + (overlapCount + 1) * (appHeight + EVENT_GAP) + this.moreIndicatorHeight;\n      var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n      if (this.parent.rowAutoHeight || enableAppRender) {\n        var appointmentElement = void 0;\n        if (this.inlineValue) {\n          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n        } else {\n          appointmentElement = this.createAppointmentElement(event, resIndex);\n        }\n        this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n        this.wireAppointmentEvents(appointmentElement, event);\n        setStyleAttribute(appointmentElement, {\n          'width': appWidth + 'px',\n          'top': appTop + 'px'\n        });\n        this.renderEventElement(event, appointmentElement, cellTd);\n        if (this.parent.rowAutoHeight) {\n          var firstChild = cellTd.parentElement.firstElementChild;\n          this.updateCellHeight(firstChild, height);\n        }\n      } else {\n        for (var i = 0; i < diffInDays; i++) {\n          var cellTd_1 = this.workCells[day + i];\n          if (cellTd_1 && isNullOrUndefined(cellTd_1.querySelector('.' + cls.MORE_INDICATOR_CLASS))) {\n            var startDate = new Date(this.dateRender[day + i].getTime());\n            var endDate = util.addDays(this.dateRender[day + i], 1);\n            var groupIndex = cellTd_1.getAttribute('data-group-index');\n            var filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n            var appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n            appHeight = this.withIndicator ? appArea : appHeight;\n            var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n            var count = filterEvents.length - renderedAppCount <= 0 ? 1 : filterEvents.length - renderedAppCount;\n            var moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n            if (!isNullOrUndefined(groupIndex)) {\n              moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n            }\n            moreIndicatorElement.style.top = appArea + 'px';\n            moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n            this.renderElement(cellTd_1, moreIndicatorElement);\n            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n          }\n        }\n      }\n    }\n  };\n  MonthEvent.prototype.updateCellHeight = function (cell, height) {\n    if (height > cell.offsetHeight) {\n      setStyleAttribute(cell, {\n        'height': height + 'px'\n      });\n    }\n  };\n  MonthEvent.prototype.updateBlockElements = function () {\n    var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n    for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n      var element = blockElement_1[_i];\n      var target = closest(element, 'tr');\n      this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n      element.style.height = target.offsetHeight - 1 - this.monthHeaderHeight + 'px';\n      var firstChild = target.firstElementChild;\n      var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n      element.style.width = firstChild.offsetWidth * width + 'px';\n    }\n  };\n  // eslint-disable-next-line max-len\n  MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n    var filteredEvents;\n    if (isNullOrUndefined(groupIndex)) {\n      filteredEvents = this.filterEvents(startDate, endDate);\n    } else {\n      var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n      filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n    }\n    return filteredEvents;\n  };\n  MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var dateTime = util.resetTime(date).getTime();\n      if (util.resetTime(app[this.fields.startTime]).getTime() <= dateTime && util.resetTime(app[this.fields.endTime]).getTime() >= dateTime) {\n        appointmentsList.push(app);\n      }\n    }\n    return appointmentsList;\n  };\n  MonthEvent.prototype.getIndex = function (date) {\n    var appIndex = -1;\n    var appointments = this.renderedEvents;\n    if (appointments.length > 0) {\n      var appointmentsList = this.getOverlapEvents(date, appointments);\n      var appLevel = appointmentsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n    return appIndex === -1 ? 0 : appIndex;\n  };\n  MonthEvent.prototype.moreIndicatorClick = function (event) {\n    var _this = this;\n    var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n    var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n    var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n    var groupIndex = target.getAttribute('data-group-index');\n    var moreArgs = {\n      cancel: false,\n      event: event,\n      element: target,\n      isPopupOpen: true,\n      startTime: startDate,\n      endTime: endDate,\n      viewName: this.parent.getNavigateView()\n    };\n    if (groupIndex) {\n      moreArgs.groupIndex = parseInt(groupIndex, 10);\n    }\n    this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n      if (!clickArgs.cancel) {\n        if (clickArgs.isPopupOpen) {\n          var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n          var moreArgs_1 = {\n            date: startDate,\n            event: filteredEvents,\n            element: event.target\n          };\n          _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n        } else {\n          _this.parent.setProperties({\n            selectedDate: startDate\n          }, true);\n          _this.parent.changeView(clickArgs.viewName, event);\n        }\n      }\n    });\n  };\n  MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n    var _this = this;\n    var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n    var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n    var eventObj = this.getEventData(event);\n    var args = {\n      data: eventObj,\n      element: appointmentElement,\n      cancel: false,\n      type: eventType\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (eventArgs.cancel) {\n        _this.renderedEvents.pop();\n      } else {\n        _this.renderElement(cellTd, appointmentElement, isAppointment);\n      }\n    });\n  };\n  MonthEvent.prototype.getEventData = function (event) {\n    var eventObj = extend({}, event, null, true);\n    eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n    eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n    return eventObj;\n  };\n  MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n    if (this.maxOrIndicator && isAppointment) {\n      this.setMaxEventHeight(element, cellTd);\n    }\n    var wrapperEle = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n    if (wrapperEle) {\n      wrapperEle.appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n  MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n    var moreIndicatorElement = createElement('div', {\n      className: cls.MORE_INDICATOR_CLASS,\n      innerHTML: '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n      attrs: {\n        'tabindex': '0',\n        'data-start-date': startDate.getTime().toString(),\n        'data-end-date': endDate.getTime().toString(),\n        'role': 'list'\n      }\n    });\n    return moreIndicatorElement;\n  };\n  MonthEvent.prototype.removeHeightProperty = function (selector) {\n    var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n  MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n    var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var height = cell.offsetHeight - headerHeight - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n    setStyleAttribute(event, {\n      'height': height + 'px',\n      'align-items': 'center'\n    });\n  };\n  MonthEvent.prototype.destroy = function () {\n    this.element = null;\n    this.fields = null;\n    this.maxHeight = null;\n    this.withIndicator = null;\n    this.maxOrIndicator = null;\n    this.moreIndicatorHeight = null;\n    this.removeEventListener();\n    _super.prototype.destroy.call(this);\n  };\n  return MonthEvent;\n}(EventBase);\nexport { MonthEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","prepend","createElement","extend","EventHandler","closest","addClass","isNullOrUndefined","setStyleAttribute","remove","EventBase","cls","events","util","EVENT_GAP","MonthEvent","_super","parent","_this","call","renderedEvents","monthHeaderHeight","moreIndicatorHeight","renderType","element","activeView","getPanel","fields","eventFields","maxHeight","eventSettings","enableMaxHeight","enableIndicator","rowAutoHeight","withIndicator","maxOrIndicator","ignoreWhitespace","addEventListener","removeEventWrapper","appElement","length","currentView","_i","appElement_1","wrap","classList","contains","parentElement","parentNode","renderAppointments","dragAndDropModule","setDragArea","conWrap","querySelector","CONTENT_WRAP_CLASS","uiStateValues","top","scrollTop","left","scrollLeft","appointmentWrapper","slice","querySelectorAll","APPOINTMENT_WRAPPER_CLASS","crudModule","crudObj","isCrudAction","i","len","sourceEvent","groupIndex","targetEvent","ele","appointmentWrapper_1","removeHeightProperty","CONTENT_TABLE_CLASS","WORK_CELLS_CLASS","wrapper","className","cellTd","appendChild","offsetTop","removeChild","eventHeight","getElementHeightFromClass","APPOINTMENT_CLASS","virtualScrollModule","currentAction","activeViewOptions","group","resources","renderResourceEvents","updateFocusedWorkCell","renderEventsHandler","renderDates","workDays","updateBlockElements","data","cssProperties","getCssProperties","module","getModuleName","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","enablePersistence","notify","contentReady","scrollUiUpdate","showWeekNumber","totalCells_1","weekNumberCells","WEEK_NUMBER_CLASS","forEach","cell","height","offsetHeight","WEEK_NUMBER_WRAPPER_CLASS","renderTemplates","dateRender","resData","eventsList","blockList","resIndex","cssClass","groupOrder","eventBase","filterEventsByResource","eventsProcessed","blockProcessed","workCells","sortByDateTime","totalCells","height_1","clientHeight","cellDetail","isTimelineView","getBoundingClientRect","cellWidth","width","cellHeight","filteredDates","getRenderedDates","getSlotDates","processBlockEvents","eventsList_1","event_1","resourceBase","getCssClass","spannedEvents","splitEvent","_a","spannedEvents_1","event_2","sDate","startTime","getStartTime","getIndex","updateIndicatorIcon","renderEvents","blockEvents","blockEvents_1","event_3","blockSpannedList","isAllDay","temp","isSameDate","endTime","isBlockIcon","getDateInMs","e","addDays","resetTime","Date","push","blockSpannedList_1","blockEvent","_b","spannedEvents_2","event_4","renderBlockEvents","start","end","setHours","event","isIcon","eventData","getEndTime","day","getIndexOfDate","getTime","getCellTd","position","getPosition","diffInDays","count","appWidth","getEventWidth","appLeft","enableRtl","appRight","appHeight","appTop","getRowTop","blockElement","createBlockAppointmentElement","renderEventElement","renderBlockIndicator","blockIndicator","BLOCK_INDICATOR_CLASS","startDate","endDate","indexOf","cloneData","getStartHour","getEndHour","startHour","getStartEndHours","endHour","actualStartTime","actualEndTime","isLeft","isRight","actualStartHour","actualEndHour","getHours","getMinutes","getSeconds","getDate","isGroupAdaptive","lastResourceLevel","sourceRes","target","resources_1","slotData","slots","dates","map","date","noOfDays","showWeekend","WEEK_LENGTH","splice","createAppointmentElement","record","isCloneElement","eventSubject","subject","default","localeObj","getConstant","newRecord","attrs","id","getReadonlyAttribute","getAnnouncementString","Guid","toString","isReadonly","appointmentDetails","APPOINTMENT_DETAILS","templateElement","eventObj","getEventData","eventTemplate","scheduleId","viewName","eventTemplateName","templateId","getAppointmentTemplate","eventLocation","location","appointmentSubject","SUBJECT_CLASS","innerHTML","appointmentStartTime","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","appointmentEndTime","innerElement","allDayString","timeString","appTime","appLocation","LOCATION_CLASS","appendEventIcons","renderResizeHandler","recurrenceRule","recurrenceID","iconClass","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","ICON","iconLeft","EVENT_INDICATOR_CLASS","EVENT_ICON_LEFT_CLASS","iconRight","EVENT_ICON_RIGHT_CLASS","minDate","maxDate","overlapCount","Index","enableAppRender","appointmentElement","inlineValue","inlineModule","createInlineAppointmentElement","applyResourceColor","wireAppointmentEvents","firstChild","firstElementChild","updateCellHeight","cellTd_1","MORE_INDICATOR_CLASS","getAttribute","filterEvents","getFilteredEvents","appArea","renderedAppCount","Math","floor","moreIndicatorElement","getMoreIndicatorElement","setAttribute","style","renderElement","add","moreIndicatorClick","BLOCK_APPOINTMENT_CLASS","blockElement_1","offsetParent","round","offsetWidth","filteredEvents","parseInt","undefined","getOverlapEvents","appointments","appointmentsList","appointments_1","app","dateTime","appIndex","appLevel","obj","getSmallestMissingNumber","moreArgs","cancel","isPopupOpen","getNavigateView","trigger","moreEventsClick","clickArgs","moreArgs_1","quickPopup","moreEventClick","setProperties","selectedDate","changeView","eventType","isAppointment","args","type","eventRendered","eventArgs","pop","setMaxEventHeight","wrapperEle","globalize","formatNumber","selector","rows","rows_1","row","headerHeight","getOuterHeight","DATE_HEADER_CLASS","destroy","removeEventListener"],"sources":["C:/Users/DELL/Downloads/GTSInterviewSchedulerComponent-main/GTSInterviewSchedulerComponent-main/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/month.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */ (function (_super) {\n    __extends(MonthEvent, _super);\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.monthHeaderHeight = 0;\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.maxOrIndicator = (_this.maxHeight || _this.withIndicator);\n        _this.moreIndicatorHeight =\n            (_this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace) ? 0 : _this.moreIndicatorHeight;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.removeEventWrapper = function (appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month') ? appElement : [appElement[0]];\n            for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n                var wrap = appElement_1[_i];\n                if (!wrap.classList.contains('e-more-indicator') && wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[i].groupIndex + '\"]'));\n                this.removeEventWrapper(appElement);\n                if (this.parent.crudModule.crudObj.targetEvent[i] && this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[i].groupIndex + '\"]'));\n                    this.removeEventWrapper(ele);\n                }\n            }\n        }\n        else {\n            for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n                var wrap = appointmentWrapper_1[_i];\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.currentView === 'Month') {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            var cellTd = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n            cellTd.removeChild(wrapper);\n        }\n        this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n            if (this.parent.virtualScrollModule) {\n                this.parent.virtualScrollModule.updateFocusedWorkCell();\n            }\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(events.contentReady, {});\n            }\n            this.parent.notify(events.scrollUiUpdate, data);\n            if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n                var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n                var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WEEK_NUMBER_CLASS));\n                weekNumberCells.forEach(function (cell, i) {\n                    var height = totalCells_1[i].offsetHeight;\n                    setStyleAttribute(cell, { 'height': height + 'px' });\n                });\n                this.parent.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS).scrollTop =\n                    this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).scrollTop;\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n            var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            var height_1 = this.parent.height === 'auto' ? (this.parent.element.querySelector('.e-content-wrap').clientHeight +\n                this.parent.element.querySelector('.e-date-header-wrap').clientHeight) / totalCells.length\n                : this.parent.element.querySelector('.e-schedule-table').clientHeight / totalCells.length;\n            totalCells.forEach(function (cell) {\n                setStyleAttribute(cell, { 'height': height_1 + 'px' });\n            });\n        }\n        var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ?\n            0 : this.workCells.length - 1].getBoundingClientRect();\n        this.cellWidth = cellDetail.width;\n        this.cellHeight = cellDetail.height;\n        this.dateRender = dateRender;\n        var filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            var spannedEvents = this.splitEvent(event_1, filteredDates || this.dateRender);\n            for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n                var event_2 = spannedEvents_1[_a];\n                if (this.maxHeight) {\n                    var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] :\n                        this.getStartTime(event_2, event_2.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n                    var event_4 = spannedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[day];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var start = this.parent.activeView.getStartHour();\n        var end = this.parent.activeView.getEndHour();\n        var startHour = util.getStartEndHours(event[this.fields.startTime], start, end);\n        var endHour = util.getStartEndHours(event[this.fields.endTime], start, end);\n        var actualStartTime = cloneData[this.fields.startTime];\n        var actualEndTime = cloneData[this.fields.endTime];\n        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n        if (util.resetTime(actualStartTime).getTime() !== util.resetTime(actualEndTime).getTime()) {\n            var actualStartHour = startHour.startHour;\n            var actualEndHour = endHour.endHour;\n            var startTime = new Date(util.resetTime(actualStartTime));\n            startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n            cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ?\n                startTime.getTime() : util.addDays(startTime, 1).getTime());\n            if (actualEndTime.getTime() !== util.resetTime(actualEndTime).getTime()) {\n                var endTime = new Date(util.resetTime(actualEndTime));\n                cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <=\n                    endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n            }\n        }\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var sourceRes = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n                var slotData = resources_1[_i];\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n        if (isCloneElement === void 0) { isCloneElement = false; }\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default ||\n            this.parent.localeObj.getConstant('addTitle'));\n        var newRecord = extend({}, record, record.data, true);\n        var attrs = {\n            'data-id': 'Appointment_' + record[this.fields.id],\n            'role': 'button', 'tabindex': '0',\n            'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n            'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n        };\n        if (!isCloneElement) {\n            attrs['data-guid'] = record.Guid;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            attrs['data-group-index'] = resIndex.toString();\n        }\n        var appointmentWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS, attrs: attrs });\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        var templateElement;\n        var eventData = record.data;\n        var eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var eventTemplate = 'eventTemplate' + (this.parent.activeViewOptions.group.resources.length > 0 ? '_' + resIndex : '');\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (eventLocation ? ';&nbsp' + eventLocation : ''))\n            });\n            var appointmentStartTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: cls.APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''), innerHTML: timeString\n                    });\n                    var appLocation = createElement('div', { className: cls.LOCATION_CLASS, innerHTML: eventLocation });\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n        if (day < 0) {\n            return;\n        }\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        this.renderedEvents.push(extend({}, event, null, true));\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 5;\n            var cellTd = this.workCells[day];\n            var appTop = (overlapCount * (appHeight + EVENT_GAP));\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                var appointmentElement = void 0;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var cellTd_1 = this.workCells[day + i];\n                    if (cellTd_1 && isNullOrUndefined(cellTd_1.querySelector('.' + cls.MORE_INDICATOR_CLASS))) {\n                        var startDate = new Date(this.dateRender[day + i].getTime());\n                        var endDate = util.addDays(this.dateRender[day + i], 1);\n                        var groupIndex = cellTd_1.getAttribute('data-group-index');\n                        var filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n                        var appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n                        appHeight = this.withIndicator ? appArea : appHeight;\n                        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        var moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = appArea + 'px';\n                        moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n                        this.renderElement(cellTd_1, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstElementChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    // eslint-disable-next-line max-len\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var dateTime = util.resetTime(date).getTime();\n            if ((util.resetTime(app[this.fields.startTime]).getTime() <= dateTime) &&\n                (util.resetTime(app[this.fields.endTime]).getTime() >= dateTime)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var _this = this;\n        var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        var groupIndex = target.getAttribute('data-group-index');\n        var moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n                    var moreArgs_1 = { date: startDate, event: filteredEvents, element: event.target };\n                    _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n                }\n                else {\n                    _this.parent.setProperties({ selectedDate: startDate }, true);\n                    _this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var _this = this;\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n        var eventObj = this.getEventData(event);\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n                _this.renderedEvents.pop();\n            }\n            else {\n                _this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    };\n    MonthEvent.prototype.getEventData = function (event) {\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        var wrapperEle = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (wrapperEle) {\n            wrapperEle.appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: cls.MORE_INDICATOR_CLASS,\n            innerHTML: '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n            attrs: {\n                'tabindex': '0',\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString(),\n                'role': 'list'\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n        var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    };\n    MonthEvent.prototype.destroy = function () {\n        this.element = null;\n        this.fields = null;\n        this.maxHeight = null;\n        this.withIndicator = null;\n        this.maxOrIndicator = null;\n        this.moreIndicatorHeight = null;\n        this.removeEventListener();\n        _super.prototype.destroy.call(this);\n    };\n    return MonthEvent;\n}(EventBase));\nexport { MonthEvent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}