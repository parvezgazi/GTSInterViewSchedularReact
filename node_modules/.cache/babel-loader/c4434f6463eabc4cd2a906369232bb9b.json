{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */function (_super) {\n  __extends(YearEvent, _super);\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n    _this.isResource = false;\n    return _this;\n  }\n  YearEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + cls.APPOINTMENT_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n    this.renderedEvents = [];\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n  };\n  YearEvent.prototype.yearViewEvents = function () {\n    var months = this.getMonths();\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n      var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = util.resetTime(new Date(startDate.getTime()));\n        var end = util.addDays(new Date(start.getTime()), 1);\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n        if (filterEvents.length > 0) {\n          var workCell = workCells[index];\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: cls.APPOINTMENT_CLASS\n            }));\n          }\n        }\n        startDate = util.addDays(new Date(startDate.getTime()), 1);\n      }\n    }\n  };\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var months = this.getMonths();\n    for (var row = 0; row < months.length; row++) {\n      var wrapper = wrapperCollection[row];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[dayIndex];\n          td = dayIndex + 1;\n          var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n          if (!eventWrapper_1) {\n            eventWrapper_1 = createElement('div', {\n              className: cls.APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper_1);\n          }\n          if (this.parent.enableRtl) {\n            rightValue = row * this.cellWidth;\n          } else {\n            leftValue = row * this.cellWidth;\n          }\n        } else {\n          if (this.parent.enableRtl) {\n            rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          } else {\n            leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          }\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = util.resetTime(new Date(monthStart.getTime()));\n        var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n        dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[index], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP + this_1.moreIndicatorHeight;\n          var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n          var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n          var moreIndicatorCount = count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n              var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n              return \"continue\";\n            } else if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n          var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n          if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n            this_1.updateCellHeight(rowTd, availedHeight);\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              eventData.MoreIndicator = true;\n              this_1.renderedEvents.push(eventData);\n              isSpannedCollection.push(eventData);\n            }\n          }\n        };\n        var this_1 = this;\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          _loop_1(index, count);\n        }\n        monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n  };\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n    eventObj.data = data;\n  };\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n    var months = this.getMonths();\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < months.length; month++) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[month], resources[i], month, i, monthStart);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n          this.renderResourceEvent(wrapperCollection[i], resources[i], month, i, monthStart);\n        }\n      }\n    }\n  };\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n    this.groupOrder = resource.groupOrder;\n    for (var a = 0; a < eventDatas.length; a++) {\n      var data = eventDatas[a];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this.isSpannedEvent(eventData, monthStart);\n        overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n      var availedHeight = this.cellHeader + this.eventHeight * (a + 1) + EVENT_GAP + this.moreIndicatorHeight;\n      var leftValue = this.parent.activeViewOptions.orientation === 'Vertical' ? month * this.cellWidth : index * this.cellWidth;\n      if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n        this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n        this.updateCellHeight(td, availedHeight);\n      } else {\n        var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            this.renderedEvents.push(extend({}, eventDatas[i], {\n              Index: overlapIndex + i\n            }, true));\n          }\n        }\n        break;\n      }\n    }\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n    var _this = this;\n    var eventObj = this.isSpannedEvent(eventData, monthDate);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n    if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n      return;\n    }\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.cellWidth;\n    }\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n        _this.wireAppointmentEvents(wrap, eventObj);\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n    if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n      return;\n    }\n    var endDate;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = util.addDays(new Date(startDate.getTime()), 1);\n    }\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-selected': 'false',\n        'aria-grabbed': 'true',\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], cls.READ_ONLY);\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n        templateElement.push(subjectEle);\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n  YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n    var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n    if (eventStart.getTime() < monthStart.getTime()) {\n      eventData[this.fields.startTime] = monthStart;\n      isSpanned.isLeft = true;\n    }\n    if (eventEnd.getTime() > monthEnd.getTime()) {\n      eventData[this.fields.endTime] = monthEnd;\n      isSpanned.isRight = true;\n    }\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n      var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n      if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n        end = util.addDays(new Date(end), -1).getTime();\n      }\n      isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n    }\n    eventData.isSpanned = isSpanned;\n    if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n      eventData[this.fields.startTime] = this.parent.minDate;\n    }\n    if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n      eventData[this.fields.endTime] = this.parent.maxDate;\n    }\n    return eventData;\n  };\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = util.resetTime(new Date(date.getTime())).getTime();\n        dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n        if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      } else {\n        var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart : util.resetTime(appEnd).getTime() >= dateStart;\n        if (util.resetTime(appStart).getTime() <= dateStart && timeCondition || util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n    return appointmentsList;\n  };\n  YearEvent.prototype.getMonths = function () {\n    var _this = this;\n    // eslint-disable-next-line prefer-spread\n    return Array.apply(null, {\n      length: this.parent.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n  YearEvent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.parent = null;\n  };\n  return YearEvent;\n}(TimelineEvent);\nexport { YearEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","append","createElement","extend","remove","isNullOrUndefined","setStyleAttribute","EventHandler","TimelineEvent","util","events","cls","EVENT_GAP","YearEvent","_super","parent","_this","call","isResource","renderAppointments","dragAndDropModule","setDragArea","fields","eventFields","elementSelector","currentView","APPOINTMENT_CLASS","APPOINTMENT_WRAPPER_CLASS","MORE_INDICATOR_CLASS","eventWrappers","slice","element","querySelectorAll","_i","eventWrappers_1","length","wrapper","renderedEvents","yearViewEvents","removeCellHeight","activeViewOptions","group","resources","uiStateValues","isGroupAdaptive","timelineResourceEvents","timelineYearViewEvents","renderTemplates","notify","contentReady","months","getMonths","months_1","month","queryString","indexOf","workCells","monthDate","Date","selectedDate","getFullYear","monthStart","calendarUtil","getMonthStartDate","getTime","monthEnd","getMonthEndDate","startDate","getWeekFirstDate","firstDayOfWeek","endDate","addDays","getWeekLastDate","index","start","resetTime","end","filterEvents","eventBase","workCell","appendChild","className","querySelector","WORK_CELLS_CLASS","cellWidth","offsetWidth","cellHeader","getOuterHeight","DATE_HEADER_CLASS","eventTable","EVENT_TABLE_CLASS","eventHeight","getElementHeightFromClass","wrapperCollection","APPOINTMENT_CONTAINER_CLASS","row","td","eventWrapper","getMonth","dayIndex","getDay","isSpannedCollection","orientation","leftValue","rightValue","wrapper_1","eventWrapper_1","enableRtl","getDate","rowTd","cellHeight","offsetHeight","dayStart","dayEnd","resource","resourceBase","lastResourceLevel","groupIndex","dayEvents","undefined","sortByDateTime","_loop_1","count","eventData","this_1","updateSpannedEvents","overlapIndex","getIndex","Index","availedHeight","moreIndicatorHeight","appArea","renderedAppCount","Math","floor","moreIndicatorCount","isRendered","filter","eventObj","Guid","isSpanned","MoreIndicator","moreIndex","renderMoreIndicator","isRowAutoHeight","rowAutoHeight","renderEvent","updateCellHeight","push","isLeftRightResize","data","isLeft","isRight","isBottom","isTop","startTime","endTime","i","len","renderResourceEvent","lastDateOfMonth","eventDatas","rowIndex","groupOrder","a","isSpannedEvent","left","right","wrap","createEventElement","width","top","offsetTop","args","cancel","type","trigger","eventRendered","eventArgs","wireAppointmentEvents","moreIndicator","getMoreIndicatorElement","rowTr","setAttribute","toString","add","moreIndicatorClick","record","eventSubject","subject","eventSettings","default","localeObj","getConstant","attrs","id","getReadonlyAttribute","getAnnouncementString","cssClass","isReadonly","READ_ONLY","resIndex","getGroupIndexFromEvent","templateElement","eventTemplate","templateId","eventTemplateName","getAppointmentTemplate","locationEle","location","subjectEle","SUBJECT_CLASS","innerHTML","startTimeEle","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","endTimeEle","isAllDay","appointmentDetails","APPOINTMENT_DETAILS","renderResizeHandler","applyResourceColor","eventStart","eventEnd","ceil","MS_PER_DAY","minDate","maxDate","getOverlapEvents","date","appointments","appointmentsList","dateStart","dateEnd","appointments_1","app","appStart","appEnd","timeCondition","apply","monthsCount","map","value","firstMonthOfYear","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_TABLE_CLASS","CONTENT_TABLE_CLASS","rows","rows_1","firstElementChild","style","height","destroy"],"sources":["C:/Users/DELL/Downloads/GTSInterviewSchedulerComponent-main/GTSInterviewSchedulerComponent-main/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/year.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[index];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[row];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[dayIndex];\n                    td = dayIndex + 1;\n                    var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper_1) {\n                        eventWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper_1);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[index], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n                    var moreIndicatorCount = (count - renderedAppCount) <= 0 ? 1 : (count - renderedAppCount);\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n                    if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[month], resources[i], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i, monthStart);\n                }\n            }\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var data = eventDatas[a];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP + this.moreIndicatorHeight;\n            var leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this.cellWidth : index * this.cellWidth;\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this.updateCellHeight(td, availedHeight);\n            }\n            else {\n                var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this.renderedEvents.push(extend({}, eventDatas[i], { Index: overlapIndex + i }, true));\n                    }\n                }\n                break;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.fields.startTime] = monthStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.fields.endTime] = monthEnd;\n            isSpanned.isRight = true;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n            var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n            if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                end = util.addDays(new Date(end), -1).getTime();\n            }\n            isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                if ((util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n            else {\n                var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart :\n                    util.resetTime(appEnd).getTime() >= dateStart;\n                if (((util.resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                    (util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IAC9E,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ;AACA,SAASI,QAAQ,EAAEC,MAAM,EAAEC,aAAa,EAAEC,MAAM,EAAEC,MAAM,EAAEC,iBAAiB,QAAQ,sBAAsB;AACzG,SAASC,iBAAiB,EAAEC,YAAY,QAAQ,sBAAsB;AACtE,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,OAAO,KAAKC,IAAI,MAAM,cAAc;AACpC,OAAO,KAAKC,MAAM,MAAM,kBAAkB;AAC1C,OAAO,KAAKC,GAAG,MAAM,sBAAsB;AAC3C,IAAIC,SAAS,GAAG,CAAC;AACjB;AACA;AACA;AACA,IAAIC,SAAS,GAAG,aAAe,UAAUC,MAAM,EAAE;EAC7C5B,SAAS,CAAC2B,SAAS,EAAEC,MAAM,CAAC;EAC5B,SAASD,SAASA,CAACE,MAAM,EAAE;IACvB,IAAIC,KAAK,GAAGF,MAAM,CAACG,IAAI,CAAC,IAAI,EAAEF,MAAM,EAAE,KAAK,CAAC,IAAI,IAAI;IACpDC,KAAK,CAACE,UAAU,GAAG,KAAK;IACxB,OAAOF,KAAK;EAChB;EACAH,SAAS,CAACf,SAAS,CAACqB,kBAAkB,GAAG,YAAY;IACjD,IAAI,IAAI,CAACJ,MAAM,CAACK,iBAAiB,EAAE;MAC/B,IAAI,CAACL,MAAM,CAACK,iBAAiB,CAACC,WAAW,CAAC,CAAC;IAC/C;IACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACP,MAAM,CAACQ,WAAW;IACrC,IAAIC,eAAe,GAAI,IAAI,CAACT,MAAM,CAACU,WAAW,KAAK,MAAM,GAAI,GAAG,GAAGd,GAAG,CAACe,iBAAiB,GACpF,GAAG,GAAGf,GAAG,CAACgB,yBAAyB,GAAG,IAAI,GAAGhB,GAAG,CAACiB,oBAAoB;IACzE,IAAIC,aAAa,GAAG,EAAE,CAACC,KAAK,CAACb,IAAI,CAAC,IAAI,CAACF,MAAM,CAACgB,OAAO,CAACC,gBAAgB,CAACR,eAAe,CAAC,CAAC;IACxF,KAAK,IAAIS,EAAE,GAAG,CAAC,EAAEC,eAAe,GAAGL,aAAa,EAAEI,EAAE,GAAGC,eAAe,CAACC,MAAM,EAAEF,EAAE,EAAE,EAAE;MACjF,IAAIG,OAAO,GAAGF,eAAe,CAACD,EAAE,CAAC;MACjC7B,MAAM,CAACgC,OAAO,CAAC;IACnB;IACA,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,IAAI,CAACtB,MAAM,CAACU,WAAW,KAAK,MAAM,EAAE;MACpC,IAAI,CAACa,cAAc,CAAC,CAAC;IACzB,CAAC,MACI;MACD,IAAI,CAACC,gBAAgB,CAAC,CAAC;MACvB,IAAI,IAAI,CAACxB,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAACpB,MAAM,CAAC4B,aAAa,CAACC,eAAe,EAAE;QACxG,IAAI,CAAC1B,UAAU,GAAG,IAAI;QACtB,IAAI,CAAC2B,sBAAsB,CAAC,CAAC;MACjC,CAAC,MACI;QACD,IAAI,CAACC,sBAAsB,CAAC,CAAC;MACjC;IACJ;IACA,IAAI,CAAC/B,MAAM,CAACgC,eAAe,CAAC,CAAC;IAC7B,IAAI,CAAChC,MAAM,CAACiC,MAAM,CAACtC,MAAM,CAACuC,YAAY,EAAE,CAAC,CAAC,CAAC;EAC/C,CAAC;EACDpC,SAAS,CAACf,SAAS,CAACwC,cAAc,GAAG,YAAY;IAC7C,IAAIY,MAAM,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC;IAC7B,KAAK,IAAIlB,EAAE,GAAG,CAAC,EAAEmB,QAAQ,GAAGF,MAAM,EAAEjB,EAAE,GAAGmB,QAAQ,CAACjB,MAAM,EAAEF,EAAE,EAAE,EAAE;MAC5D,IAAIoB,KAAK,GAAGD,QAAQ,CAACnB,EAAE,CAAC;MACxB,IAAIqB,WAAW,GAAG,8BAA8B,IAAIJ,MAAM,CAACK,OAAO,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,mBAAmB;MACpG,IAAIG,SAAS,GAAG,EAAE,CAAC1B,KAAK,CAACb,IAAI,CAAC,IAAI,CAACF,MAAM,CAACgB,OAAO,CAACC,gBAAgB,CAACsB,WAAW,CAAC,CAAC;MAChF,IAAIG,SAAS,GAAG,IAAIC,IAAI,CAAC,IAAI,CAAC3C,MAAM,CAAC4C,YAAY,CAACC,WAAW,CAAC,CAAC,EAAEP,KAAK,EAAE,CAAC,CAAC;MAC1E,IAAIQ,UAAU,GAAG,IAAI,CAAC9C,MAAM,CAAC+C,YAAY,CAACC,iBAAiB,CAAC,IAAIL,IAAI,CAACD,SAAS,CAACO,OAAO,CAAC,CAAC,CAAC,CAAC;MAC1F,IAAIC,QAAQ,GAAG,IAAI,CAAClD,MAAM,CAAC+C,YAAY,CAACI,eAAe,CAAC,IAAIR,IAAI,CAACD,SAAS,CAACO,OAAO,CAAC,CAAC,CAAC,CAAC;MACtF,IAAIG,SAAS,GAAG1D,IAAI,CAAC2D,gBAAgB,CAACP,UAAU,EAAE,IAAI,CAAC9C,MAAM,CAACsD,cAAc,CAAC;MAC7E,IAAIC,OAAO,GAAG7D,IAAI,CAAC8D,OAAO,CAAC9D,IAAI,CAAC+D,eAAe,CAACP,QAAQ,EAAE,IAAI,CAAClD,MAAM,CAACsD,cAAc,CAAC,EAAE,CAAC,CAAC;MACzF,KAAK,IAAII,KAAK,GAAG,CAAC,EAAEN,SAAS,CAACH,OAAO,CAAC,CAAC,GAAGM,OAAO,CAACN,OAAO,CAAC,CAAC,EAAES,KAAK,EAAE,EAAE;QAClE,IAAIC,KAAK,GAAGjE,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAACS,SAAS,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC;QACzD,IAAIY,GAAG,GAAGnE,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACgB,KAAK,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,IAAIa,YAAY,GAAG,IAAI,CAAC9D,MAAM,CAAC+D,SAAS,CAACD,YAAY,CAACH,KAAK,EAAEE,GAAG,CAAC;QACjE,IAAIC,YAAY,CAAC1C,MAAM,GAAG,CAAC,EAAE;UACzB,IAAI4C,QAAQ,GAAGvB,SAAS,CAACiB,KAAK,CAAC;UAC/B,IAAIM,QAAQ,EAAE;YACVA,QAAQ,CAACC,WAAW,CAAC9E,aAAa,CAAC,KAAK,EAAE;cAAE+E,SAAS,EAAEtE,GAAG,CAACe;YAAkB,CAAC,CAAC,CAAC;UACpF;QACJ;QACAyC,SAAS,GAAG1D,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACS,SAAS,CAACH,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MAC9D;IACJ;EACJ,CAAC;EACDnD,SAAS,CAACf,SAAS,CAACgD,sBAAsB,GAAG,YAAY;IACrD,IAAIiC,QAAQ,GAAG,IAAI,CAAChE,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,GAAG,GAAGvE,GAAG,CAACwE,gBAAgB,CAAC;IAC5E,IAAI,CAACC,SAAS,GAAGL,QAAQ,CAACM,WAAW;IACrC,IAAI,CAACC,UAAU,GAAG7E,IAAI,CAAC8E,cAAc,CAACR,QAAQ,CAACG,aAAa,CAAC,GAAG,GAAGvE,GAAG,CAAC6E,iBAAiB,CAAC,CAAC;IAC1F,IAAIC,UAAU,GAAG,IAAI,CAAC1E,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,GAAG,GAAGvE,GAAG,CAAC+E,iBAAiB,CAAC;IAC/E,IAAI,CAACC,WAAW,GAAGlF,IAAI,CAACmF,yBAAyB,CAACH,UAAU,EAAE9E,GAAG,CAACe,iBAAiB,CAAC;IACpF,IAAImE,iBAAiB,GAAG,EAAE,CAAC/D,KAAK,CAACb,IAAI,CAAC,IAAI,CAACF,MAAM,CAACgB,OAAO,CAACC,gBAAgB,CAAC,GAAG,GAAGrB,GAAG,CAACmF,2BAA2B,CAAC,CAAC;IAClH,IAAI5C,MAAM,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC;IAC7B,KAAK,IAAI4C,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG7C,MAAM,CAACf,MAAM,EAAE4D,GAAG,EAAE,EAAE;MAC1C,IAAI3D,OAAO,GAAGyD,iBAAiB,CAACE,GAAG,CAAC;MACpC,IAAIC,EAAE,GAAGD,GAAG,GAAG,CAAC;MAChB,IAAIE,YAAY,GAAG/F,aAAa,CAAC,KAAK,EAAE;QAAE+E,SAAS,EAAEtE,GAAG,CAACgB;MAA0B,CAAC,CAAC;MACrFS,OAAO,CAAC4C,WAAW,CAACiB,YAAY,CAAC;MACjC,IAAIpC,UAAU,GAAG,IAAIH,IAAI,CAAC,IAAI,CAAC3C,MAAM,CAAC4C,YAAY,CAACC,WAAW,CAAC,CAAC,EAAEV,MAAM,CAAC6C,GAAG,CAAC,EAAE,CAAC,CAAC;MACjF,IAAI9B,QAAQ,GAAG,IAAIP,IAAI,CAACG,UAAU,CAACD,WAAW,CAAC,CAAC,EAAEC,UAAU,CAACqC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;MAC/E,IAAIC,QAAQ,GAAGtC,UAAU,CAACuC,MAAM,CAAC,CAAC;MAClC,IAAIC,mBAAmB,GAAG,EAAE;MAC5B,IAAI,IAAI,CAACtF,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,EAAE;QAC5D,IAAI,CAACjE,cAAc,GAAG,EAAE;MAC5B;MACA,OAAOwB,UAAU,CAACG,OAAO,CAAC,CAAC,IAAIC,QAAQ,CAACD,OAAO,CAAC,CAAC,EAAE;QAC/C,IAAIuC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAIC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,IAAI,CAACzF,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,EAAE;UAC1D,IAAIG,SAAS,GAAGZ,iBAAiB,CAACM,QAAQ,CAAC;UAC3CH,EAAE,GAAGG,QAAQ,GAAG,CAAC;UACjB,IAAIO,cAAc,GAAGD,SAAS,CAACvB,aAAa,CAAC,GAAG,GAAGvE,GAAG,CAACgB,yBAAyB,CAAC;UACjF,IAAI,CAAC+E,cAAc,EAAE;YACjBA,cAAc,GAAGxG,aAAa,CAAC,KAAK,EAAE;cAAE+E,SAAS,EAAEtE,GAAG,CAACgB;YAA0B,CAAC,CAAC;YACnF8E,SAAS,CAACzB,WAAW,CAAC0B,cAAc,CAAC;UACzC;UACA,IAAI,IAAI,CAAC3F,MAAM,CAAC4F,SAAS,EAAE;YACvBH,UAAU,GAAGT,GAAG,GAAG,IAAI,CAACX,SAAS;UACrC,CAAC,MACI;YACDmB,SAAS,GAAGR,GAAG,GAAG,IAAI,CAACX,SAAS;UACpC;QACJ,CAAC,MACI;UACD,IAAI,IAAI,CAACrE,MAAM,CAAC4F,SAAS,EAAE;YACvBH,UAAU,GAAG,CAAEL,QAAQ,GAAGtC,UAAU,CAAC+C,OAAO,CAAC,CAAC,GAAI,CAAC,IAAI,IAAI,CAACxB,SAAS;UACzE,CAAC,MACI;YACDmB,SAAS,GAAG,CAAEJ,QAAQ,GAAGtC,UAAU,CAAC+C,OAAO,CAAC,CAAC,GAAI,CAAC,IAAI,IAAI,CAACxB,SAAS;UACxE;QACJ;QACA,IAAIyB,KAAK,GAAG,IAAI,CAAC9F,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,+BAA+B,GAAGc,EAAE,GAAG,MAAM,CAAC;QAC5F,IAAI,CAACc,UAAU,GAAGD,KAAK,CAACE,YAAY;QACpC,IAAIC,QAAQ,GAAGvG,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAACG,UAAU,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAIiD,MAAM,GAAGxG,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACsD,QAAQ,CAAChD,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,IAAIkD,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,IAAI,CAACnG,MAAM,CAAC4B,aAAa,CAACC,eAAe,EAAE;UAC3CsE,QAAQ,GAAG,IAAI,CAACnG,MAAM,CAACoG,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrG,MAAM,CAAC4B,aAAa,CAAC0E,UAAU,CAAC;QAC/F;QACA,IAAIC,SAAS,GAAG,IAAI,CAACvG,MAAM,CAAC+D,SAAS,CAACD,YAAY,CAACmC,QAAQ,EAAEC,MAAM,EAAEM,SAAS,EAAEL,QAAQ,CAAC;QACzFI,SAAS,GAAG,IAAI,CAACvG,MAAM,CAAC+D,SAAS,CAAC0C,cAAc,CAACF,SAAS,CAAC;QAC3D,IAAIG,OAAO,GAAG,SAAAA,CAAUhD,KAAK,EAAEiD,KAAK,EAAE;UAClC,IAAIC,SAAS,GAAGxH,MAAM,CAAC,CAAC,CAAC,EAAEmH,SAAS,CAAC7C,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;UACxDmD,MAAM,CAACC,mBAAmB,CAACF,SAAS,EAAEX,QAAQ,EAAEC,MAAM,CAAC;UACvD,IAAIa,YAAY,GAAGF,MAAM,CAACG,QAAQ,CAACf,QAAQ,CAAC;UAC5CW,SAAS,CAACK,KAAK,GAAGF,YAAY;UAC9B,IAAIG,aAAa,GAAGL,MAAM,CAACtC,UAAU,GAAIsC,MAAM,CAACjC,WAAW,IAAImC,YAAY,GAAG,CAAC,CAAE,GAAGlH,SAAS,GACzFgH,MAAM,CAACM,mBAAmB;UAC9B,IAAIC,OAAO,GAAGP,MAAM,CAACd,UAAU,GAAGc,MAAM,CAACtC,UAAU,GAAGsC,MAAM,CAACM,mBAAmB;UAChF,IAAIE,gBAAgB,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,IAAIP,MAAM,CAACjC,WAAW,GAAG/E,SAAS,CAAC,CAAC;UAC7E,IAAI2H,kBAAkB,GAAIb,KAAK,GAAGU,gBAAgB,IAAK,CAAC,GAAG,CAAC,GAAIV,KAAK,GAAGU,gBAAiB;UACzF,IAAIR,MAAM,CAAC7G,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,EAAE;YAC9D,IAAIkC,UAAU,GAAGZ,MAAM,CAACvF,cAAc,CAACoG,MAAM,CAAC,UAAUC,QAAQ,EAAE;cAC9D,OAAOA,QAAQ,CAACC,IAAI,KAAKhB,SAAS,CAACgB,IAAI;YAC3C,CAAC,CAAC;YACF,IAAIC,SAAS,GAAGvC,mBAAmB,CAACoC,MAAM,CAAC,UAAUC,QAAQ,EAAE;cAC3D,OAAOA,QAAQ,CAACC,IAAI,KAAKhB,SAAS,CAACgB,IAAI;YAC3C,CAAC,CAAC;YACF,IAAIH,UAAU,CAACrG,MAAM,GAAG,CAAC,IAAIqG,UAAU,CAAC,CAAC,CAAC,CAACK,aAAa,IAAID,SAAS,CAACzG,MAAM,GAAG,CAAC,IAAIyG,SAAS,CAAC,CAAC,CAAC,CAACC,aAAa,EAAE;cAC5G,IAAIC,SAAS,GAAGlB,MAAM,CAAC7G,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,GAAGP,GAAG,GAAGI,QAAQ;cAC7FyB,MAAM,CAACmB,mBAAmB,CAAC9C,YAAY,EAAEsC,kBAAkB,EAAEvB,QAAQ,EAAE8B,SAAS,EAAEvC,SAAS,EAAEC,UAAU,CAAC;cACxG,OAAO,UAAU;YACrB,CAAC,MACI,IAAIgC,UAAU,CAACrG,MAAM,GAAG,CAAC,IAAIyG,SAAS,CAACzG,MAAM,GAAG,CAAC,EAAE;cACpD,OAAO,UAAU;YACrB;UACJ;UACA,IAAI6G,eAAe,GAAGpB,MAAM,CAAC7G,MAAM,CAACkI,aAAa,IAAIrB,MAAM,CAAC7G,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY;UACjH,IAAI0C,eAAe,IAAIpB,MAAM,CAACd,UAAU,GAAGmB,aAAa,EAAE;YACtDL,MAAM,CAACsB,WAAW,CAACjD,YAAY,EAAE0B,SAAS,EAAE5B,GAAG,EAAEQ,SAAS,EAAEC,UAAU,EAAE3C,UAAU,EAAEsC,QAAQ,CAAC;YAC7FyB,MAAM,CAACuB,gBAAgB,CAACtC,KAAK,EAAEoB,aAAa,CAAC;YAC7C5B,mBAAmB,CAAC+C,IAAI,CAACzB,SAAS,CAAC;UACvC,CAAC,MACI;YACD,IAAImB,SAAS,GAAGlB,MAAM,CAAC7G,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,GAAGP,GAAG,GAAGI,QAAQ;YAC7FyB,MAAM,CAACmB,mBAAmB,CAAC9C,YAAY,EAAEsC,kBAAkB,EAAEvB,QAAQ,EAAE8B,SAAS,EAAEvC,SAAS,EAAEC,UAAU,CAAC;YACxG,IAAIoB,MAAM,CAAC7G,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,EAAE;cAC9DqB,SAAS,CAACkB,aAAa,GAAG,IAAI;cAC9BjB,MAAM,CAACvF,cAAc,CAAC+G,IAAI,CAACzB,SAAS,CAAC;cACrCtB,mBAAmB,CAAC+C,IAAI,CAACzB,SAAS,CAAC;YACvC;UACJ;QACJ,CAAC;QACD,IAAIC,MAAM,GAAG,IAAI;QACjB,KAAK,IAAInD,KAAK,GAAG,CAAC,EAAEiD,KAAK,GAAGJ,SAAS,CAACnF,MAAM,EAAEsC,KAAK,GAAGiD,KAAK,EAAEjD,KAAK,EAAE,EAAE;UAClEgD,OAAO,CAAChD,KAAK,EAAEiD,KAAK,CAAC;QACzB;QACA7D,UAAU,GAAGpD,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACG,UAAU,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,IAAI,IAAI,CAACjD,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,EAAE;UAC1DH,QAAQ,EAAE;UACV,IAAI,CAAC9D,cAAc,GAAG,EAAE;QAC5B;MACJ;IACJ;EACJ,CAAC;EACDxB,SAAS,CAACf,SAAS,CAAC+H,mBAAmB,GAAG,UAAUa,QAAQ,EAAE1B,QAAQ,EAAEC,MAAM,EAAE;IAC5E,IAAIoC,iBAAiB,GAAI,IAAI,CAACnI,UAAU,IAAI,IAAI,CAACH,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,IAC/F,CAAC,IAAI,CAACpF,UAAU,IAAI,IAAI,CAACH,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAa;IACpF,IAAIgD,IAAI,GAAG;MAAEC,MAAM,EAAE,IAAI;MAAEC,OAAO,EAAE,IAAI;MAAEC,QAAQ,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAK,CAAC;IACvE,IAAI1C,QAAQ,CAAChD,OAAO,CAAC,CAAC,IAAI0E,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqI,SAAS,CAAC,CAAC3F,OAAO,CAAC,CAAC,EAAE;MACjE,IAAIqF,iBAAiB,EAAE;QACnBC,IAAI,CAACC,MAAM,GAAG,KAAK;MACvB,CAAC,MACI;QACDD,IAAI,CAACI,KAAK,GAAG,KAAK;MACtB;IACJ;IACA,IAAKzC,MAAM,CAACjD,OAAO,CAAC,CAAC,IAAI0E,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,CAAC5F,OAAO,CAAC,CAAC,IAAMqF,iBAAiB,IAAI,CAAC,IAAI,CAACnI,UAAU,IACvGT,IAAI,CAAC8D,OAAO,CAAC0C,MAAM,EAAE,CAAC,CAAC,CAAC,CAACf,QAAQ,CAAC,CAAC,KAAKwC,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,CAAC1D,QAAQ,CAAC,CAAE,EAAE;MACnF,IAAImD,iBAAiB,EAAE;QACnBC,IAAI,CAACE,OAAO,GAAG,KAAK;MACxB,CAAC,MACI;QACDF,IAAI,CAACG,QAAQ,GAAG,KAAK;MACzB;IACJ;IACAf,QAAQ,CAACY,IAAI,GAAGA,IAAI;EACxB,CAAC;EACDzI,SAAS,CAACf,SAAS,CAAC+C,sBAAsB,GAAG,YAAY;IACrD,IAAIkC,QAAQ,GAAG,IAAI,CAAChE,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,GAAG,GAAGvE,GAAG,CAACwE,gBAAgB,CAAC;IAC5E,IAAI,CAACC,SAAS,GAAGL,QAAQ,CAACM,WAAW;IACrC,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAIG,UAAU,GAAG,IAAI,CAAC1E,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,GAAG,GAAGvE,GAAG,CAAC+E,iBAAiB,CAAC;IAC/E,IAAI,CAACC,WAAW,GAAGlF,IAAI,CAACmF,yBAAyB,CAACH,UAAU,EAAE9E,GAAG,CAACe,iBAAiB,CAAC;IACpF,IAAImE,iBAAiB,GAAG,EAAE,CAAC/D,KAAK,CAACb,IAAI,CAAC,IAAI,CAACF,MAAM,CAACgB,OAAO,CAACC,gBAAgB,CAAC,GAAG,GAAGrB,GAAG,CAACmF,2BAA2B,CAAC,CAAC;IAClH,IAAIpD,SAAS,GAAG,IAAI,CAAC3B,MAAM,CAAC4B,aAAa,CAACC,eAAe,GACrD,CAAC,IAAI,CAAC7B,MAAM,CAACoG,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrG,MAAM,CAAC4B,aAAa,CAAC0E,UAAU,CAAC,CAAC,GAAG,IAAI,CAACtG,MAAM,CAACoG,YAAY,CAACC,iBAAiB;IACnI,IAAIlE,MAAM,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC;IAC7B,IAAI,IAAI,CAACpC,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,EAAE;MAC5D,KAAK,IAAIjD,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGH,MAAM,CAACf,MAAM,EAAEkB,KAAK,EAAE,EAAE;QAChD,IAAIQ,UAAU,GAAG,IAAIH,IAAI,CAAC,IAAI,CAAC3C,MAAM,CAAC4C,YAAY,CAACC,WAAW,CAAC,CAAC,EAAEV,MAAM,CAACG,KAAK,CAAC,EAAE,CAAC,CAAC;QACnF,KAAK,IAAIwG,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGpH,SAAS,CAACP,MAAM,EAAE0H,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;UAClD,IAAI,CAACxH,cAAc,GAAG,EAAE;UACxB,IAAI,CAAC0H,mBAAmB,CAAClE,iBAAiB,CAACxC,KAAK,CAAC,EAAEX,SAAS,CAACmH,CAAC,CAAC,EAAExG,KAAK,EAAEwG,CAAC,EAAEhG,UAAU,CAAC;QAC1F;MACJ;IACJ,CAAC,MACI;MACD,KAAK,IAAIgG,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGpH,SAAS,CAACP,MAAM,EAAE0H,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;QAClD,IAAI,CAACxH,cAAc,GAAG,EAAE;QACxB,KAAK,IAAIgB,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGH,MAAM,CAACf,MAAM,EAAEkB,KAAK,EAAE,EAAE;UAChD,IAAIQ,UAAU,GAAG,IAAIH,IAAI,CAAC,IAAI,CAAC3C,MAAM,CAAC4C,YAAY,CAACC,WAAW,CAAC,CAAC,EAAEV,MAAM,CAACG,KAAK,CAAC,EAAE,CAAC,CAAC;UACnF,IAAI,CAAC0G,mBAAmB,CAAClE,iBAAiB,CAACgE,CAAC,CAAC,EAAEnH,SAAS,CAACmH,CAAC,CAAC,EAAExG,KAAK,EAAEwG,CAAC,EAAEhG,UAAU,CAAC;QACtF;MACJ;IACJ;EACJ,CAAC;EACDhD,SAAS,CAACf,SAAS,CAACiK,mBAAmB,GAAG,UAAU3H,OAAO,EAAE8E,QAAQ,EAAE7D,KAAK,EAAEoB,KAAK,EAAEZ,UAAU,EAAE;IAC7F,IAAIoC,YAAY,GAAG/F,aAAa,CAAC,KAAK,EAAE;MAAE+E,SAAS,EAAEtE,GAAG,CAACgB;IAA0B,CAAC,CAAC;IACrFS,OAAO,CAAC4C,WAAW,CAACiB,YAAY,CAAC;IACjC,IAAIhC,QAAQ,GAAGxD,IAAI,CAAC8D,OAAO,CAAC9D,IAAI,CAACuJ,eAAe,CAAC,IAAItG,IAAI,CAACG,UAAU,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACpF,IAAIiG,UAAU,GAAG,IAAI,CAAClJ,MAAM,CAAC+D,SAAS,CAACD,YAAY,CAAChB,UAAU,EAAEI,QAAQ,EAAEsD,SAAS,EAAEL,QAAQ,CAAC;IAC9F,IAAIgD,QAAQ,GAAG,IAAI,CAACnJ,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,GAAG7B,KAAK,GAAGpB,KAAK;IACvF,IAAI2C,EAAE,GAAG,IAAI,CAACjF,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,+BAA+B,IAAIgF,QAAQ,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;IACrG,IAAI,CAACpD,UAAU,GAAGd,EAAE,CAACe,YAAY;IACjC,IAAI,CAACoD,UAAU,GAAGjD,QAAQ,CAACiD,UAAU;IACrC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,UAAU,CAAC9H,MAAM,EAAEiI,CAAC,EAAE,EAAE;MACxC,IAAId,IAAI,GAAGW,UAAU,CAACG,CAAC,CAAC;MACxB,IAAItC,YAAY,GAAG,KAAK,CAAC;MACzB,IAAIH,SAAS,GAAGxH,MAAM,CAAC,CAAC,CAAC,EAAEmJ,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;MAC5C,IAAI,IAAI,CAACvI,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,EAAE;QAC1D,IAAIuG,QAAQ,GAAG,IAAI,CAAC2B,cAAc,CAAC1C,SAAS,EAAE9D,UAAU,CAAC;QACzDiE,YAAY,GAAG,IAAI,CAACC,QAAQ,CAACW,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqI,SAAS,CAAC,CAAC;QAC7DhC,SAAS,CAACK,KAAK,GAAGF,YAAY;MAClC,CAAC,MACI;QACDA,YAAY,GAAG,IAAI,CAACC,QAAQ,CAACJ,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACqI,SAAS,CAAC,CAAC;QAC9DhC,SAAS,CAACK,KAAK,GAAGF,YAAY;MAClC;MACA,IAAIG,aAAa,GAAG,IAAI,CAAC3C,UAAU,GAAI,IAAI,CAACK,WAAW,IAAIyE,CAAC,GAAG,CAAC,CAAE,GAAGxJ,SAAS,GAAG,IAAI,CAACsH,mBAAmB;MACzG,IAAI3B,SAAS,GAAI,IAAI,CAACxF,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,GACrEjD,KAAK,GAAG,IAAI,CAAC+B,SAAS,GAAGX,KAAK,GAAG,IAAI,CAACW,SAAS;MACnD,IAAI,IAAI,CAACrE,MAAM,CAACkI,aAAa,IAAI,IAAI,CAACnC,UAAU,GAAGmB,aAAa,EAAE;QAC9D,IAAI,CAACiB,WAAW,CAACjD,YAAY,EAAE0B,SAAS,EAAEtE,KAAK,EAAEkD,SAAS,EAAEA,SAAS,EAAE1C,UAAU,EAAEY,KAAK,CAAC;QACzF,IAAI,CAAC0E,gBAAgB,CAACnD,EAAE,EAAEiC,aAAa,CAAC;MAC5C,CAAC,MACI;QACD,IAAIa,SAAS,GAAG,IAAI,CAAC/H,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,GAAGjD,KAAK,GAAGoB,KAAK;QAC1F,IAAI,CAACsE,mBAAmB,CAAC9C,YAAY,EAAEgE,UAAU,CAAC9H,MAAM,GAAGiI,CAAC,EAAEvG,UAAU,EAAEiF,SAAS,EAAEvC,SAAS,EAAEA,SAAS,EAAE9B,KAAK,CAAC;QACjH,IAAI,IAAI,CAAC1D,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,EAAE;UAC5D,KAAK,IAAIuD,CAAC,GAAGpF,KAAK,EAAEoF,CAAC,GAAGI,UAAU,CAAC9H,MAAM,EAAE0H,CAAC,EAAE,EAAE;YAC5C,IAAI,CAACxH,cAAc,CAAC+G,IAAI,CAACjJ,MAAM,CAAC,CAAC,CAAC,EAAE8J,UAAU,CAACJ,CAAC,CAAC,EAAE;cAAE7B,KAAK,EAAEF,YAAY,GAAG+B;YAAE,CAAC,EAAE,IAAI,CAAC,CAAC;UAC1F;QACJ;QACA;MACJ;IACJ;EACJ,CAAC;EACD;EACAhJ,SAAS,CAACf,SAAS,CAACoJ,WAAW,GAAG,UAAU9G,OAAO,EAAEuF,SAAS,EAAE5B,GAAG,EAAEuE,IAAI,EAAEC,KAAK,EAAE9G,SAAS,EAAEyG,QAAQ,EAAE;IACnG,IAAIlJ,KAAK,GAAG,IAAI;IAChB,IAAI0H,QAAQ,GAAG,IAAI,CAAC2B,cAAc,CAAC1C,SAAS,EAAElE,SAAS,CAAC;IACxD,IAAI+G,IAAI,GAAG,IAAI,CAACC,kBAAkB,CAAC/B,QAAQ,CAAC;IAC5C,IAAIgC,KAAK;IACT,IAAIjG,KAAK;IACT,IAAIiE,QAAQ,CAACE,SAAS,CAAClB,KAAK,KAAK,CAAC,EAAE;MAChC,IAAIkC,OAAO,GAAGnJ,IAAI,CAAC8D,OAAO,CAACmE,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;MAC7DlB,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,GAAIA,OAAO,GAAGlB,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqI,SAAS,CAAC,GAAIC,OAAO,GAAGlB,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC;IACzH;IACA,IAAIlB,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqI,SAAS,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,EAAE;MACjE;IACJ;IACA,IAAI,IAAI,CAAC7I,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,EAAE;MAC5D7B,KAAK,GAAGsB,GAAG,GAAG,CAAC;MACf,IAAI2C,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqI,SAAS,CAAC,CAAC3F,OAAO,CAAC,CAAC,KAAK0E,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,CAAC5F,OAAO,CAAC,CAAC,EAAE;QACvF0E,QAAQ,CAACE,SAAS,CAAClB,KAAK,GAAG,CAAC;MAChC;MACAgD,KAAK,GAAGhC,QAAQ,CAACE,SAAS,CAAClB,KAAK,GAAG,IAAI,CAACtC,SAAS;IACrD,CAAC,MACI;MACDX,KAAK,GAAGyF,QAAQ,GAAG,CAAC;MACpBQ,KAAK,GAAG,IAAI,CAACtF,SAAS;IAC1B;IACA,IAAIyB,KAAK,GAAG,IAAI,CAAC9F,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,+BAA+B,GAAGT,KAAK,GAAG,MAAM,CAAC;IAC/F,IAAIkG,GAAG,GAAG9D,KAAK,CAAC+D,SAAS,GAAG,IAAI,CAACtF,UAAU,GAAI,IAAI,CAACK,WAAW,GAAG+C,QAAQ,CAACV,KAAM,GAAGpH,SAAS;IAC7FN,iBAAiB,CAACkK,IAAI,EAAE;MACpB,OAAO,EAAEE,KAAK,GAAG,IAAI;MAAE,QAAQ,EAAE,IAAI,CAAC/E,WAAW,GAAG,IAAI;MAAE,MAAM,EAAE2E,IAAI,GAAG,IAAI;MAAE,OAAO,EAAEC,KAAK,GAAG,IAAI;MAAE,KAAK,EAAEI,GAAG,GAAG;IACvH,CAAC,CAAC;IACF,IAAIE,IAAI,GAAG;MAAEvB,IAAI,EAAEZ,QAAQ;MAAE3G,OAAO,EAAEyI,IAAI;MAAEM,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE;IAAQ,CAAC;IAC1E,IAAI,CAAChK,MAAM,CAACiK,OAAO,CAACtK,MAAM,CAACuK,aAAa,EAAEJ,IAAI,EAAE,UAAUK,SAAS,EAAE;MACjE,IAAI,CAACA,SAAS,CAACJ,MAAM,EAAE;QACnB1I,OAAO,CAAC4C,WAAW,CAACwF,IAAI,CAAC;QACzBxJ,KAAK,CAACmK,qBAAqB,CAACX,IAAI,EAAE9B,QAAQ,CAAC;QAC3C,IAAI1H,KAAK,CAACD,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,EAAE;UAC3DnB,KAAK,CAACqB,cAAc,CAAC+G,IAAI,CAACjJ,MAAM,CAAC,CAAC,CAAC,EAAEuI,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC/D,CAAC,MACI,IAAI1H,KAAK,CAACD,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,EAAE;UAChEtF,KAAK,CAACqB,cAAc,CAAC+G,IAAI,CAACjJ,MAAM,CAAC,CAAC,CAAC,EAAEuI,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC/D,CAAC,MACI,IAAI,CAACA,QAAQ,CAACE,SAAS,CAACY,OAAO,IAAId,QAAQ,CAACE,SAAS,CAACW,MAAM,KAAKvI,KAAK,CAACD,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,YAAY,IAC1H,CAACoC,QAAQ,CAACE,SAAS,CAACY,OAAO,EAAE;UAChCxI,KAAK,CAACqB,cAAc,CAAC+G,IAAI,CAACjJ,MAAM,CAAC,CAAC,CAAC,EAAEuI,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC/D;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACD;EACA7H,SAAS,CAACf,SAAS,CAACiJ,mBAAmB,GAAG,UAAU3G,OAAO,EAAEsF,KAAK,EAAEvD,SAAS,EAAE4B,GAAG,EAAEuE,IAAI,EAAEC,KAAK,EAAE9F,KAAK,EAAE;IACpG,IAAI,IAAI,CAAC1D,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,KAAK,CAAC,IAAIC,OAAO,CAAC8C,aAAa,CAAC,oBAAoB,GAAGf,SAAS,CAACH,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE;MACxI;IACJ;IACA,IAAIM,OAAO;IACX,IAAI,IAAI,CAACvD,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,EAAE;MAC1DmC,OAAO,GAAG7D,IAAI,CAAC8D,OAAO,CAAC9D,IAAI,CAACuJ,eAAe,CAAC,IAAItG,IAAI,CAACS,SAAS,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAClF,CAAC,MACI;MACDM,OAAO,GAAG7D,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACS,SAAS,CAACH,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC5D;IACA,IAAIoH,aAAa,GAAG,IAAI,CAACC,uBAAuB,CAAC3D,KAAK,EAAEvD,SAAS,EAAEG,OAAO,CAAC;IAC3E,IAAIgH,KAAK,GAAG,IAAI,CAACvK,MAAM,CAACgB,OAAO,CAACmD,aAAa,CAAC,+BAA+B,IAAIa,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;IAChG,IAAI4E,GAAG,GAAGW,KAAK,CAACV,SAAS,IAAI,IAAI,CAAC9D,UAAU,GAAG,IAAI,CAACoB,mBAAmB,CAAC;IACxEoC,IAAI,GAAIjC,IAAI,CAACC,KAAK,CAACgC,IAAI,GAAG,IAAI,CAAClF,SAAS,CAAC,GAAG,IAAI,CAACA,SAAU;IAC3DmF,KAAK,GAAIlC,IAAI,CAACC,KAAK,CAACiC,KAAK,GAAG,IAAI,CAACnF,SAAS,CAAC,GAAG,IAAI,CAACA,SAAU;IAC7D9E,iBAAiB,CAAC8K,aAAa,EAAE;MAAE,OAAO,EAAE,IAAI,CAAChG,SAAS,GAAG,IAAI;MAAE,MAAM,EAAEkF,IAAI,GAAG,IAAI;MAAE,OAAO,EAAEC,KAAK,GAAG,IAAI;MAAE,KAAK,EAAEI,GAAG,GAAG;IAAK,CAAC,CAAC;IACnI,IAAI,CAACtK,iBAAiB,CAACoE,KAAK,CAAC,EAAE;MAC3B2G,aAAa,CAACG,YAAY,CAAC,kBAAkB,EAAE9G,KAAK,CAAC+G,QAAQ,CAAC,CAAC,CAAC;IACpE;IACApJ,OAAO,CAAC4C,WAAW,CAACoG,aAAa,CAAC;IAClC7K,YAAY,CAACkL,GAAG,CAACL,aAAa,EAAE,OAAO,EAAE,IAAI,CAACM,kBAAkB,EAAE,IAAI,CAAC;EAC3E,CAAC;EACD7K,SAAS,CAACf,SAAS,CAAC2K,kBAAkB,GAAG,UAAUkB,MAAM,EAAE;IACvD,IAAIC,YAAY,GAAID,MAAM,CAAC,IAAI,CAACrK,MAAM,CAACuK,OAAO,CAAC,IAAI,IAAI,CAAC9K,MAAM,CAAC+K,aAAa,CAACxK,MAAM,CAACuK,OAAO,CAACE,OAAO,IAC5F,IAAI,CAAChL,MAAM,CAACiL,SAAS,CAACC,WAAW,CAAC,UAAU,CAAE;IACrD,IAAIhG,YAAY,GAAG/F,aAAa,CAAC,KAAK,EAAE;MACpC+E,SAAS,EAAEtE,GAAG,CAACe,iBAAiB;MAChCwK,KAAK,EAAE;QACH,SAAS,EAAE,cAAc,GAAGP,MAAM,CAAC,IAAI,CAACrK,MAAM,CAAC6K,EAAE,CAAC;QAClD,WAAW,EAAER,MAAM,CAAChD,IAAI;QACxB,MAAM,EAAE,QAAQ;QAAE,UAAU,EAAE,GAAG;QACjC,eAAe,EAAE,IAAI,CAAC5H,MAAM,CAAC+D,SAAS,CAACsH,oBAAoB,CAACT,MAAM,CAAC;QAAE,eAAe,EAAE,OAAO;QAAE,cAAc,EAAE,MAAM;QACrH,YAAY,EAAE,IAAI,CAAC5K,MAAM,CAACsL,qBAAqB,CAACV,MAAM;MAC1D;IACJ,CAAC,CAAC;IACF,IAAI,IAAI,CAACW,QAAQ,EAAE;MACftM,QAAQ,CAAC,CAACiG,YAAY,CAAC,EAAE,IAAI,CAACqG,QAAQ,CAAC;IAC3C;IACA,IAAIX,MAAM,CAAC,IAAI,CAACrK,MAAM,CAACiL,UAAU,CAAC,EAAE;MAChCvM,QAAQ,CAAC,CAACiG,YAAY,CAAC,EAAEtF,GAAG,CAAC6L,SAAS,CAAC;IAC3C;IACA,IAAI,IAAI,CAACzL,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,EAAE;MAC1D,IAAIsK,QAAQ,GAAG,IAAI,CAACC,sBAAsB,CAACf,MAAM,CAAC;MAClD1F,YAAY,CAACsF,YAAY,CAAC,kBAAkB,EAAEkB,QAAQ,CAACjB,QAAQ,CAAC,CAAC,CAAC;IACtE;IACA,IAAImB,eAAe,GAAG,EAAE;IACxB,IAAIjE,QAAQ,GAAGvI,MAAM,CAAC,CAAC,CAAC,EAAEwL,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC;IAC7C,IAAI,IAAI,CAAC5K,MAAM,CAACyB,iBAAiB,CAACoK,aAAa,EAAE;MAC7C,IAAIC,UAAU,GAAG,IAAI,CAAC9L,MAAM,CAACgB,OAAO,CAACoK,EAAE,GAAG,GAAG,GAAG,IAAI,CAACpL,MAAM,CAACyB,iBAAiB,CAACsK,iBAAiB,GAAG,eAAe;MACjHH,eAAe,GAAG,IAAI,CAAC5L,MAAM,CAACgM,sBAAsB,CAAC,CAAC,CAACrE,QAAQ,EAAE,IAAI,CAAC3H,MAAM,EAAE,eAAe,EAAE8L,UAAU,EAAE,KAAK,CAAC;IACrH,CAAC,MACI;MACD,IAAIG,WAAW,GAAIrB,MAAM,CAAC,IAAI,CAACrK,MAAM,CAAC2L,QAAQ,CAAC,IAAI,IAAI,CAAClM,MAAM,CAAC+K,aAAa,CAACxK,MAAM,CAAC2L,QAAQ,CAAClB,OAAO,IAAI,EAAG;MAC3G,IAAImB,UAAU,GAAGhN,aAAa,CAAC,KAAK,EAAE;QAClC+E,SAAS,EAAEtE,GAAG,CAACwM,aAAa;QAC5BC,SAAS,EAAGxB,YAAY,IAAIoB,WAAW,GAAG,QAAQ,GAAGA,WAAW,GAAG,EAAE;MACzE,CAAC,CAAC;MACF,IAAIK,YAAY,GAAGnN,aAAa,CAAC,KAAK,EAAE;QACpC+E,SAAS,EAAEtE,GAAG,CAAC2M,gBAAgB,IAAI,IAAI,CAACvM,MAAM,CAACwM,UAAU,GAAG,GAAG,GAAG5M,GAAG,CAAC6M,aAAa,GAAG,EAAE,CAAC;QACzFJ,SAAS,EAAE,IAAI,CAACrM,MAAM,CAAC0M,aAAa,CAAC/E,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqI,SAAS,CAAC;MACxE,CAAC,CAAC;MACF,IAAI+D,UAAU,GAAGxN,aAAa,CAAC,KAAK,EAAE;QAClC+E,SAAS,EAAEtE,GAAG,CAAC2M,gBAAgB,IAAI,IAAI,CAACvM,MAAM,CAACwM,UAAU,GAAG,GAAG,GAAG5M,GAAG,CAAC6M,aAAa,GAAG,EAAE,CAAC;QACzFJ,SAAS,EAAE,IAAI,CAACrM,MAAM,CAAC0M,aAAa,CAAC/E,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC;MACtE,CAAC,CAAC;MACF5J,QAAQ,CAAC,CAACkN,UAAU,CAAC,EAAE,eAAe,CAAC;MACvC,IAAIvB,MAAM,CAAC,IAAI,CAACrK,MAAM,CAACqM,QAAQ,CAAC,EAAE;QAC9BhB,eAAe,GAAG,CAACO,UAAU,CAAC;MAClC,CAAC,MACI,IAAI,CAACxE,QAAQ,CAACa,MAAM,IAAI,CAACb,QAAQ,CAACc,OAAO,EAAE;QAC5CmD,eAAe,GAAG,CAACU,YAAY,EAAEH,UAAU,EAAEQ,UAAU,CAAC;MAC5D,CAAC,MACI;QACD,IAAI,CAAChF,QAAQ,CAACa,MAAM,EAAE;UAClBoD,eAAe,CAACvD,IAAI,CAACiE,YAAY,CAAC;QACtC;QACAV,eAAe,CAACvD,IAAI,CAAC8D,UAAU,CAAC;QAChC,IAAI,CAACxE,QAAQ,CAACc,OAAO,EAAE;UACnBmD,eAAe,CAACvD,IAAI,CAACsE,UAAU,CAAC;QACpC;MACJ;IACJ;IACA,IAAIE,kBAAkB,GAAG1N,aAAa,CAAC,KAAK,EAAE;MAAE+E,SAAS,EAAEtE,GAAG,CAACkN;IAAoB,CAAC,CAAC;IACrF5N,MAAM,CAAC0M,eAAe,EAAEiB,kBAAkB,CAAC;IAC3C3H,YAAY,CAACjB,WAAW,CAAC4I,kBAAkB,CAAC;IAC5C,IAAI,CAACE,mBAAmB,CAAC7H,YAAY,EAAE0F,MAAM,CAACrC,IAAI,EAAEqC,MAAM,CAAC,IAAI,CAACrK,MAAM,CAACiL,UAAU,CAAC,CAAC;IACnF,IAAI,CAACwB,kBAAkB,CAAC9H,YAAY,EAAEyC,QAAQ,EAAE,iBAAiB,EAAE,IAAI,CAACyB,UAAU,CAAC;IACnF,OAAOlE,YAAY;EACvB,CAAC;EACDpF,SAAS,CAACf,SAAS,CAACuK,cAAc,GAAG,UAAU3B,QAAQ,EAAEjF,SAAS,EAAE;IAChE,IAAII,UAAU,GAAG,IAAIH,IAAI,CAACD,SAAS,CAACG,WAAW,CAAC,CAAC,EAAEH,SAAS,CAACyC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAC3E,IAAIjC,QAAQ,GAAGxD,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACD,SAAS,CAACG,WAAW,CAAC,CAAC,EAAEH,SAAS,CAACyC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAC9F,IAAIyB,SAAS,GAAGxH,MAAM,CAAC,CAAC,CAAC,EAAEuI,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC;IAChD,IAAIsF,UAAU,GAAGrG,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACqI,SAAS,CAAC;IACjD,IAAIsE,QAAQ,GAAGtG,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACsI,OAAO,CAAC;IAC7C,IAAIhB,SAAS,GAAG;MAAEW,MAAM,EAAE,KAAK;MAAEC,OAAO,EAAE,KAAK;MAAE9B,KAAK,EAAE;IAAE,CAAC;IAC3D,IAAI,IAAI,CAACxG,UAAU,EAAE;MACjB,IAAI,CAAC2G,mBAAmB,CAACa,QAAQ,EAAE7E,UAAU,EAAEI,QAAQ,CAAC;IAC5D;IACA,IAAI+J,UAAU,CAAChK,OAAO,CAAC,CAAC,GAAGH,UAAU,CAACG,OAAO,CAAC,CAAC,EAAE;MAC7C2D,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACqI,SAAS,CAAC,GAAG9F,UAAU;MAC7C+E,SAAS,CAACW,MAAM,GAAG,IAAI;IAC3B;IACA,IAAI0E,QAAQ,CAACjK,OAAO,CAAC,CAAC,GAAGC,QAAQ,CAACD,OAAO,CAAC,CAAC,EAAE;MACzC2D,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACsI,OAAO,CAAC,GAAG3F,QAAQ;MACzC2E,SAAS,CAACY,OAAO,GAAG,IAAI;IAC5B;IACA,IAAI,IAAI,CAACzI,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,KAAK,CAAC,EAAE;MAC5D,IAAIyC,GAAG,GAAGnE,IAAI,CAACkE,SAAS,CAACgD,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACsI,OAAO,CAAC,CAAC,CAAC5F,OAAO,CAAC,CAAC;MAClE,IAAIU,KAAK,GAAGjE,IAAI,CAACkE,SAAS,CAACgD,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACqI,SAAS,CAAC,CAAC,CAAC3F,OAAO,CAAC,CAAC;MACtE,IAAI0E,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACqM,QAAQ,CAAC,IAAI/I,GAAG,KAAK8D,QAAQ,CAAC,IAAI,CAACpH,MAAM,CAACsI,OAAO,CAAC,CAAC5F,OAAO,CAAC,CAAC,IAAI4E,SAAS,CAACY,OAAO,EAAE;QACxG5E,GAAG,GAAGnE,IAAI,CAAC8D,OAAO,CAAC,IAAIb,IAAI,CAACkB,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAACZ,OAAO,CAAC,CAAC;MACnD;MACA4E,SAAS,CAAClB,KAAK,GAAGW,IAAI,CAAC6F,IAAI,CAAC,CAACtJ,GAAG,GAAGF,KAAK,IAAIjE,IAAI,CAAC0N,UAAU,CAAC,GAAG,CAAC;IACpE;IACAxG,SAAS,CAACiB,SAAS,GAAGA,SAAS;IAC/B,IAAInI,IAAI,CAACkE,SAAS,CAACqJ,UAAU,CAAC,CAAChK,OAAO,CAAC,CAAC,GAAGvD,IAAI,CAACkE,SAAS,CAAC,IAAI,CAAC5D,MAAM,CAACqN,OAAO,CAAC,CAACpK,OAAO,CAAC,CAAC,EAAE;MACtF2D,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACqI,SAAS,CAAC,GAAG,IAAI,CAAC5I,MAAM,CAACqN,OAAO;IAC1D;IACA,IAAI3N,IAAI,CAACkE,SAAS,CAACsJ,QAAQ,CAAC,CAACjK,OAAO,CAAC,CAAC,GAAGvD,IAAI,CAACkE,SAAS,CAAC,IAAI,CAAC5D,MAAM,CAACsN,OAAO,CAAC,CAACrK,OAAO,CAAC,CAAC,EAAE;MACpF2D,SAAS,CAAC,IAAI,CAACrG,MAAM,CAACsI,OAAO,CAAC,GAAG,IAAI,CAAC7I,MAAM,CAACsN,OAAO;IACxD;IACA,OAAO1G,SAAS;EACpB,CAAC;EACD9G,SAAS,CAACf,SAAS,CAACwO,gBAAgB,GAAG,UAAUC,IAAI,EAAEC,YAAY,EAAE;IACjE,IAAIC,gBAAgB,GAAG,EAAE;IACzB,IAAIC,SAAS;IACb,IAAIC,OAAO;IACX,IAAI,IAAI,CAAC5N,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,EAAE;MAC1D,IAAI0B,UAAU,GAAG,IAAI,CAAC9C,MAAM,CAAC+C,YAAY,CAACC,iBAAiB,CAAC,IAAIL,IAAI,CAAC6K,IAAI,CAACvK,OAAO,CAAC,CAAC,CAAC,CAAC;MACrF,IAAIC,QAAQ,GAAGxD,IAAI,CAAC8D,OAAO,CAAC,IAAI,CAACxD,MAAM,CAAC+C,YAAY,CAACI,eAAe,CAAC,IAAIR,IAAI,CAAC6K,IAAI,CAACvK,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACnG0K,SAAS,GAAGjO,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAACG,UAAU,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC;MACpE2K,OAAO,GAAGlO,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAACO,QAAQ,CAACD,OAAO,CAAC,CAAC,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC;IACpE,CAAC,MACI;MACD,IAAI,IAAI,CAACjD,MAAM,CAACkI,aAAa,EAAE;QAC3ByF,SAAS,GAAGjO,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAAC6K,IAAI,CAACvK,OAAO,CAAC,CAAC,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC;QAC9D2K,OAAO,GAAGlO,IAAI,CAAC8D,OAAO,CAAC9D,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAAC6K,IAAI,CAACvK,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC;MACjF,CAAC,MACI;QACD0K,SAAS,GAAGC,OAAO,GAAGlO,IAAI,CAACkE,SAAS,CAAC,IAAIjB,IAAI,CAAC6K,IAAI,CAACvK,OAAO,CAAC,CAAC,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC;MAC5E;IACJ;IACA,KAAK,IAAI/B,EAAE,GAAG,CAAC,EAAE2M,cAAc,GAAGJ,YAAY,EAAEvM,EAAE,GAAG2M,cAAc,CAACzM,MAAM,EAAEF,EAAE,EAAE,EAAE;MAC9E,IAAI4M,GAAG,GAAGD,cAAc,CAAC3M,EAAE,CAAC;MAC5B,IAAI6M,QAAQ,GAAG,IAAIpL,IAAI,CAACmL,GAAG,CAAC,IAAI,CAACvN,MAAM,CAACqI,SAAS,CAAC,CAAC3F,OAAO,CAAC,CAAC,CAAC;MAC7D,IAAI+K,MAAM,GAAG,IAAIrL,IAAI,CAACmL,GAAG,CAAC,IAAI,CAACvN,MAAM,CAACsI,OAAO,CAAC,CAAC5F,OAAO,CAAC,CAAC,CAAC;MACzD,IAAI,IAAI,CAACjD,MAAM,CAACyB,iBAAiB,CAAC8D,WAAW,KAAK,UAAU,IACxD,IAAI,CAACvF,MAAM,CAACyB,iBAAiB,CAACC,KAAK,CAACC,SAAS,CAACP,MAAM,GAAG,CAAC,EAAE;QAC1D,IAAK1B,IAAI,CAACkE,SAAS,CAACmK,QAAQ,CAAC,CAAC9K,OAAO,CAAC,CAAC,IAAI0K,SAAS,IAAMjO,IAAI,CAACkE,SAAS,CAACoK,MAAM,CAAC,CAAC/K,OAAO,CAAC,CAAC,IAAI2K,OAAQ,EAAE;UACpGF,gBAAgB,CAACrF,IAAI,CAACyF,GAAG,CAAC;QAC9B;MACJ,CAAC,MACI;QACD,IAAIG,aAAa,GAAGH,GAAG,CAAC,IAAI,CAACvN,MAAM,CAACqM,QAAQ,CAAC,GAAGlN,IAAI,CAACkE,SAAS,CAACoK,MAAM,CAAC,CAAC/K,OAAO,CAAC,CAAC,GAAG0K,SAAS,GACxFjO,IAAI,CAACkE,SAAS,CAACoK,MAAM,CAAC,CAAC/K,OAAO,CAAC,CAAC,IAAI0K,SAAS;QACjD,IAAMjO,IAAI,CAACkE,SAAS,CAACmK,QAAQ,CAAC,CAAC9K,OAAO,CAAC,CAAC,IAAI0K,SAAS,IAAMM,aAAc,IACpEvO,IAAI,CAACkE,SAAS,CAACmK,QAAQ,CAAC,CAAC9K,OAAO,CAAC,CAAC,IAAI0K,SAAS,IAAMjO,IAAI,CAACkE,SAAS,CAACoK,MAAM,CAAC,CAAC/K,OAAO,CAAC,CAAC,IAAI2K,OAAQ,EAAE;UACpGF,gBAAgB,CAACrF,IAAI,CAACyF,GAAG,CAAC;QAC9B;MACJ;IACJ;IACA,OAAOJ,gBAAgB;EAC3B,CAAC;EACD5N,SAAS,CAACf,SAAS,CAACqD,SAAS,GAAG,YAAY;IACxC,IAAInC,KAAK,GAAG,IAAI;IAChB;IACA,OAAOvB,KAAK,CAACwP,KAAK,CAAC,IAAI,EAAE;MAAE9M,MAAM,EAAE,IAAI,CAACpB,MAAM,CAACmO;IAAY,CAAC,CAAC,CAACC,GAAG,CAAC,UAAUC,KAAK,EAAE3K,KAAK,EAAE;MACtF,OAAOzD,KAAK,CAACD,MAAM,CAACsO,gBAAgB,GAAG5K,KAAK;IAChD,CAAC,CAAC;EACN,CAAC;EACD5D,SAAS,CAACf,SAAS,CAACyC,gBAAgB,GAAG,YAAY;IAC/C,IAAIf,eAAe,GAAG,GAAG,GAAGb,GAAG,CAAC2O,oBAAoB,GAAG,aAAa,GAAG3O,GAAG,CAAC4O,2BAA2B,GAAG,aAAa,GAAG5O,GAAG,CAAC6O,mBAAmB,GAAG,WAAW;IAC9J,IAAIC,IAAI,GAAG,EAAE,CAAC3N,KAAK,CAACb,IAAI,CAAC,IAAI,CAACc,OAAO,CAACC,gBAAgB,CAACR,eAAe,CAAC,CAAC;IACxE,KAAK,IAAIS,EAAE,GAAG,CAAC,EAAEyN,MAAM,GAAGD,IAAI,EAAExN,EAAE,GAAGyN,MAAM,CAACvN,MAAM,EAAEF,EAAE,EAAE,EAAE;MACtD,IAAI8D,GAAG,GAAG2J,MAAM,CAACzN,EAAE,CAAC;MACpB8D,GAAG,CAAC4J,iBAAiB,CAACC,KAAK,CAACC,MAAM,GAAG,EAAE;IAC3C;EACJ,CAAC;EACDhP,SAAS,CAACf,SAAS,CAACgQ,OAAO,GAAG,YAAY;IACtChP,MAAM,CAAChB,SAAS,CAACgQ,OAAO,CAAC7O,IAAI,CAAC,IAAI,CAAC;IACnC,IAAI,CAACF,MAAM,GAAG,IAAI;EACtB,CAAC;EACD,OAAOF,SAAS;AACpB,CAAC,CAACL,aAAa,CAAE;AACjB,SAASK,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}